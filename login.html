<!DOCTYPE html>
<html lang="ms">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta charset="UTF-8">
<title>Login Guru - Super Sifir STEM1</title>

<style>
body{
  font-family: Arial, sans-serif;
  text-align:center;
  padding:50px;
}

input{
  display:block;
  margin:15px auto;
  padding:10px;
  width:250px;
}

button{
  padding:10px 20px;
  background:#2563eb;
  color:white;
  border:none;
  cursor:pointer;
}

button:hover{
  background:#1d4ed8;
}

#error{
  color:red;
  margin-top:10px;
}
</style>
</head>

<body>

<h2>Login Guru</h2>

<input type="text" id="username" placeholder="Username">
<input type="password" id="password" placeholder="Password">

<button onclick="login()">Login</button>

<p id="error"></p>

<script>

async function login(){

  const username = document.getElementById("username").value.trim();
  const password = document.getElementById("password").value.trim();

  const res = await fetch(
    `${API_URL}/rest/v1/teachers?select=*&username=eq.${username}&password=eq.${password}`,
    {
      headers:{
        apikey:API_KEY,
        Authorization:`Bearer ${API_KEY}`
      }
    }
  );

  const data = await res.json();

  console.log("LOGIN RESULT:", data);

  if(data.length>0){

    localStorage.setItem("login","true");
    localStorage.setItem("teacher_id", data[0].id);
    localStorage.setItem("teacher_name", data[0].nama);

    window.location.href="ujian.html";

  }else{

    document.getElementById("error").innerText="‚ùå Login gagal";

  }

}

</script>

</body>
</html>
