<!DOCTYPE html>
<html lang="ms">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Login Guru - Super Sifir Digital STEM1</title>

<style>
body{
  font-family: Arial, sans-serif;
  background:#f5f7fb;
  padding:20px;
}

.container{
  max-width:400px;
  margin:auto;
  background:white;
  padding:25px;
  border-radius:12px;
  box-shadow:0 4px 10px rgba(0,0,0,0.05);
  text-align:center;
}

h1{
  margin-bottom:5px;
}

h3{
  margin-top:0;
  color:#444;
}

input,button{
  width:100%;
  padding:10px;
  margin:8px 0;
  border-radius:6px;
  border:1px solid #ddd;
}

button{
  background:#2563eb;
  color:white;
  border:none;
  font-weight:bold;
}

#error{
  color:red;
  margin-top:10px;
}
</style>
</head>


<body>

<div class="container">

<h1>Super Sifir Digital STEM1</h1>
<h3>üîê Login Guru</h3>


<input type="text" id="username" placeholder="Username">
<input type="password" id="password" placeholder="Password">

<button onclick="login()">Login</button>

<p id="error"></p>


<button onclick="location.href='index.html'">
üè† Menu Utama
</button>

</div>


<script>

const API_URL = "https://uziefozgozmnckfssoyv.supabase.co";
const API_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV6aWVmb3pnb3ptbmNrZnNzb3l2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzEwOTI5NTQsImV4cCI6MjA4NjY2ODk1NH0.YNfUm4BF3gKN3C0luUKN445BYcHYiD7OhAmkKTFOW-A";


async function login(){

  const username = document.getElementById("username").value.trim();
  const password = document.getElementById("password").value.trim();


  if(!username || !password){

    document.getElementById("error").innerText="Sila isi semua ruangan";
    return;

  }


  const u = encodeURIComponent(username);
  const p = encodeURIComponent(password);


  const url = `${API_URL}/rest/v1/teachers?select=*&username=eq.${u}&password=eq.${p}`;


  const res = await fetch(url,{

    headers:{
      apikey:API_KEY,
      Authorization:`Bearer ${API_KEY}`
    }

  });


  const data = await res.json();


  if(data.length>0){

    localStorage.setItem("login","true");
    localStorage.setItem("teacher_id",data[0].id);
    localStorage.setItem("teacher_name",data[0].nama);

    location.href="ujian.html";

  }else{

    document.getElementById("error").innerText="‚ùå Username atau password salah";

  }

}

</script>

</body>
</html>
